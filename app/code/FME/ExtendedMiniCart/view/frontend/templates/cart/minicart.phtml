<?php
/**
* FME Extensions
*
* NOTICE OF LICENSE 
*
* This source file is subject to the fmeextensions.com license that is
* available through the world-wide-web at this URL:
* https://www.fmeextensions.com/LICENSE.txt
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade this extension to newer
* version in the future.
*
* @category FME
* @package FME_ExtendedMiniCart
* @copyright Copyright (c) 2019 FME (http://fmeextensions.com/)
* @license https://fmeextensions.com/LICENSE.txt
*/
?>
<?php if ($block->getConfigForExtendedMiniCart() == 1) { ?>
<div id="cart-page">
   <div id="block-cart-list" data-bind="scope:'minicart-addons'" class="block">
       <!-- ko template: getTemplate() --><!-- /ko -->
       <script type="text/x-magento-init">
         {
             "#block-cart-list": {
                 "Magento_Ui/js/core/app": <?php /* @escapeNotVerified */ echo $block->getJsLayout();?>
             },
             "*": {
                 "Magento_Ui/js/block-loader": "<?= /* @escapeNotVerified */ $block->getViewFileUrl('images/loader-1.gif') ?>"
             }
         }
     </script>
   </div>
</div>
<script type="text/javascript">
    require([
            'jquery'
        ],function ($){
            $(document).ready(function() {
              var scroll='<?php echo $block->getConfigShowScroll(); ?>';
              if (scroll == 1) {
                if ($(window).width() > 500) {
                  $(window).scroll(function () {
                    if ($(this).scrollTop() > 200){
                      $(".minicart-wrapper").attr("style", "position: fixed; right: 25px; top:10px; z-index: 100;");
                      $(".block-minicart").removeAttr("style");
                      $(".block-minicart").attr("style", "overflow-y: hidden; overflow-y: auto; height:400px; display:block");
                    } else{
                      $(".authentication-wrapper").attr("style", "margin-top:-80px;");
                      $(".minicart-wrapper").removeAttr("style");
                      $(".block-minicart").removeAttr("style");
                      $(".block-minicart").attr("style", "display:block");
                    }
                  });
                } else {
                  $(".authentication-wrapper").attr("style", "margin-top:-80px;");
                  $(".minicart-wrapper").attr("style", "position: fixed; right: 15px; top:1px; z-index: 100;");
                }
              }
            });
    });
</script>
<?php } ?>